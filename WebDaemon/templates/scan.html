{% extends "interface.html" %}
{% block head %}
	{{ super() }}
	<script src="{{ url_for('static', filename='hive/tf.min.js')}}"></script>
	<link rel="stylesheet" href="{{ url_for('static', filename='hive/CFUdetect.css')}}">
{% endblock %}
{% from "bootstrap4/form.html" import form_errors %}
{% block page_content %}
<div class="row">
	<div class="col mx-3">
		<div class="row mb-3">
			<div class="input-group">
				<div class="input-group-prepend">
					<label class="input-group-text" style="width: 90px;">Serial</label>
				</div>
				<input type="text" class="form-control" id="barcode" autofocus autocomplete="off" placeholder="&lt;barcode&gt;">
				<div class="input-group-append">
					<button id="clear" type="button" class="btn btn-secondary"><i class="fa fa-backspace"></i></button>
				</div>
			</div>
		</div>
		<div class="row mb-3">
			<div class="input-group">
				<div class="input-group-prepend">
					<label class="input-group-text" style="width: 90px;">Batch#</label>
				</div>
				<input type="text" class="form-control" id="batch" readonly placeholder="">
			</div>
		</div>
		<div class="row mb-3">
			<div class="input-group">
				<div class="input-group-prepend">
					<label class="input-group-text" style="width: 90px;">Location</label>
				</div>
				<input type="text" class="form-control" id="location" readonly placeholder="">
			</div>
		</div>
		<div class="row">
			<table class="table table-sm table-striped">
				<thead>
					<tr>
						<th scope="col">ID</th>
						<th scope="col">&Delta;T (Hours)</th>
						<th scope="col">Counts</th>
					</tr>
				</thead>
				<tbody id="table_timepoints">
				</tbody>
			</table>
		</div>
	</div>
	<div class="col mx-3">
		<div class="row mb-3">
			<div style="width:100%;height:0; padding-top:100%;position:relative;">
				<div class="img-overlay-wrap">
					<img id="image" class="img-responsive" src="" style="position:absolute; top:0; left:0; width:100%;cursor:zoom-in">
					<svg viewBox="0 0 1 1" preserveAspectRatio="none" id="overlay"></svg>
				</div>
			</div>
		</div>
		<div class="row">
			<div class="input-group">
				<div class="input-group-prepend">
					<label class="input-group-text" style="width: 90px;">Counts</label>
				</div>
				<input type="number" min=0 step=1 class="form-control" id="counts" placeholder="&lt;# of colonies&gt;">
				<div class="input-group-append">
					<button id="refresh" type="button" class="btn btn-secondary"><i class="fa fa-camera"></i></button>
					<button id="detect" type="button" class="btn btn-secondary"><i class="fa fa-magic"></i></button>
					<button id="commit" type="button" class="btn btn-secondary"><i class="fa fa-save"></i></button>
				</div>
			</div>
		</div>
		<div class="row">
			<div class="row alert alert-warning" id="commit_wait" style="display: none;">
				<strong>Please wait!</strong> Committing image to DB
			</div>

			<div class="row alert alert-danger" id="commit_fail" style="display: none;">
				<strong>Error!</strong> Failed to commit image to DB
			</div>

			<div class="row alert alert-success" id="commit_ok" style="display: none;">
				<strong>Success!</strong> Image committed to DB
			</div>
		</div>
	</div>
</div>
<div id="imagemodal" class="modal">
	<div class="modal-content">
		<div class="modal-body">
			<img src="" data-dismiss="modal" data-target="imagemodal" id="imagezoom"
				style="width:100%;cursor:zoom-out">
		</div>
	</div>
</div>

{% endblock %}

{% block scripts %}
{{ super() }}
<script src="{{ url_for('static', filename='js/scan.js')}}"></script>
<script src="{{ url_for('static', filename='hive/CFUdraw.js')}}"></script>
<script src="{{ url_for('static', filename='hive/CFUdetect.js')}}"></script>
{% endblock %}